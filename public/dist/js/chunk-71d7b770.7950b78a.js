(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71d7b770"],{"11ea":function(e,t,a){},"1e44":function(e,t,a){"use strict";var s=a("ba36"),r=a.n(s);r.a},2326:function(e,t,a){},"4b93":function(e,t,a){"use strict";var s=a("b7b4"),r=a.n(s);r.a},"4e32":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btn-list"},e._l(e.btnList,function(t,s){return a("div",{key:s,class:["btn",e.activeIndex===s?"activeBtn":""],style:e.withObj,on:{click:function(a){return e.changeType(t,s)}}},[e._v(e._s(t.name))])}),0)},r=[],n={name:"switchBtnList",props:["btnList"],data:function(){return{activeIndex:0}},computed:{withObj:function(){return{width:100/this.btnList.length+"%"}}},methods:{changeType:function(e,t){this.activeIndex=t,this.$emit("changeType",{btn:e,index:t})}}},i=n,c=(a("7a15"),a("2877")),o=Object(c["a"])(i,s,r,!1,null,"85fa5a8a",null);t["a"]=o.exports},7808:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:["zb-card-content",e.order%3===0?"zb-card-content-bg":""]},[a("div",{staticClass:"zb-name"},[e._v(e._s(e.zbObj.zbName))]),a("div",{staticClass:"zb-subname"},[e._v(e._s(e.zbObj.subName))]),"1"===e.zbObj.type?a("div",{staticClass:"zb-value"},[e._v("\n    "+e._s(e.zbObj.firstValue)+"\n  ")]):e._e(),"1"===e.zbObj.type&&e.zbObj.showThreeRow?a("div",{staticClass:"zb-note"},[a("span",[e._v(e._s(e.zbObj.subLabel))]),a("span",[e._v(e._s(e.zbObj.secondValue))]),e.zbObj.needArrow?a("span",{class:[e.isFuShu(e.zbObj.secondValue)?"redColor":"greenColor"]},[e._v(e._s(e.getArrow(e.zbObj.secondValue)))]):e._e(),e.zbObj.needThreeValue?a("span",{class:[e.isFuShu(e.zbObj.thirdValue)?"redColor":"greenColor"]},[e._v(e._s(e.zbObj.thirdValue))]):e._e()]):e._e(),"2"===e.zbObj.type?a("div",{staticClass:"ring-chart-content"},[a("ring-chart",{attrs:{"fin-rate":e.zbObj.firstValue}})],1):e._e(),"2"===e.zbObj.type?a("div",{staticClass:"ring-chart-label"},[a("span",[e._v(e._s(e.zbObj.subLabel))]),a("span",[e._v(e._s(e.zbObj.secondValue))])]):e._e(),"3"===e.zbObj.type?a("div",{class:["zb-value3",e.isFuShu(e.zbObj.secondValue)?"redColor":"greenColor"]},[e._v("\n    "+e._s(e.zbObj.firstValue)),a("span",{},[e._v(e._s(e.getArrow(e.zbObj.firstValue)))])]):e._e(),"4"===e.zbObj.type?a("div",{staticClass:"second-row"},[a("span",[e._v("7天: ")]),a("span",[e._v(e._s(e.zbObj.secondValue))])]):e._e(),"4"===e.zbObj.type?a("div",{staticClass:"three-row"},[a("span",[e._v("30天: ")]),a("span",[e._v(e._s(e.zbObj.secondValue))])]):e._e()])},r=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pie-container"},[a("div",{staticClass:"pie-chart",attrs:{id:e.id}})])},i=[],c=a("2ef0"),o=a.n(c),u=a("313e"),l=a.n(u),d=a("4c3e"),b={name:"RingChart",props:{finRate:{default:"20"}},data:function(){return{chart:void 0,id:o.a.uniqueId("pie-")}},watch:{finRate:function(){this.drawPie()}},methods:{getOption:function(){var e={series:[{type:"pie",hoverAnimation:!1,radius:["55%","70%"],label:{position:"center"},data:[{name:"",value:this.finRate<0?0:this.finRate,label:{show:!0,textStyle:{color:"#fff",fontWeight:"bold",fontSize:Object(d["a"])(30)},formatter:"{c}%"},itemStyle:{normal:{color:"#34C9F8"}}},{name:"",value:100-this.finRate<0?0:100-this.finRate,label:{show:!1,lineHeight:56,textStyle:{color:"#666",fontSize:Object(d["a"])(30)}},tooltip:{show:!1},itemStyle:{normal:{color:"#3D4781"}}}]}]};return e},drawPie:function(){this.chart||(this.chart=l.a.init(document.getElementById(this.id))),this.chart.setOption(this.getOption())}},mounted:function(){this.drawPie()},beforeDestroy:function(){this.chart&&(this.chart.clear(),this.chart.dispose(),this.chart=void 0)}},h=b,f=(a("4b93"),a("2877")),p=Object(f["a"])(h,n,i,!1,null,"4dc17ce2",null),m=p.exports,V={name:"",props:["zbObj","order"],data:function(){return{}},methods:{isFuShu:function(e){return e+="",e.indexOf("-")>-1},getArrow:function(e){return e+="",e.indexOf("-")>-1?"↓":"↑"}},components:{RingChart:m}},_=V,v=(a("1e44"),Object(f["a"])(_,s,r,!1,null,"edfa5e00",null));t["a"]=v.exports},"7a15":function(e,t,a){"use strict";var s=a("11ea"),r=a.n(s);r.a},a591:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home-content"},[a("div",{staticClass:"header-content"},[a("page-title",{attrs:{title:e.pageName}}),a("switch-btn-list",{attrs:{btnList:e.switchList},on:{changeType:e.changeAllType}})],1),a("div",{staticClass:"main-content"},e._l(e.cardList,function(e,t){return a("ZbCard",{key:t,attrs:{"zb-obj":e,order:t}})}),1)])},r=[],n=(a("7f7f"),a("96cf"),a("3b8d")),i=(a("ac4d"),a("8a81"),a("ac6a"),a("a170")),c=a("4e32"),o=a("7808"),u=a("2ef0"),l=a.n(u),d=a("2d87"),b=a("a474"),h={name:"",data:function(){return{pageName:"总体概览",switchList:[{name:"月"},{name:"季"},{name:"年累"},{name:"年"}],cardListDataInit:[],cardListData:[{zbName:"销售额(万)",subLabel:"同比:",firstValue:"0",secondValue:"0",thirdValue:"",type:"1",needArrow:!0,showThreeRow:!1,needThreeValue:!1},{zbName:"销售达成",subLabel:"目标(万):",firstValue:"0",secondValue:"0",thirdValue:"",type:"2",needArrow:!0},{zbName:"销售同比",subLabel:"",firstValue:"0%",secondValue:"0",thirdValue:"",type:"3",needArrow:!0},{zbName:"回款额(万)",subLabel:"同比:",firstValue:"0",secondValue:"0",thirdValue:"",type:"1",needArrow:!0,showThreeRow:!0,needThreeValue:!1},{zbName:"回款达成",subLabel:"目标(万):",firstValue:"0",secondValue:"0",thirdValue:"",type:"2",needArrow:!0},{zbName:"回款同比",subLabel:"",firstValue:"0%",secondValue:"0",thirdValue:"",type:"3",needArrow:!0},{zbName:"毛利额(万)",subLabel:"同比:",firstValue:"0",secondValue:"0%",thirdValue:"",type:"1",needArrow:!0,showThreeRow:!0,needThreeValue:!1},{zbName:"扣前毛利率",subLabel:"同期:",firstValue:"0%",secondValue:"0",thirdValue:"0%",type:"1",needArrow:!0,showThreeRow:!0,needThreeValue:!0},{zbName:"扣后毛利率",subLabel:"同期:",firstValue:"0%",secondValue:"0",thirdValue:"0%",type:"1",needArrow:!0,showThreeRow:!0,needThreeValue:!0},{zbName:"库存金额(万)",subLabel:"同比:",firstValue:"0",secondValue:"0%",thirdValue:"",type:"1",needArrow:!1,showThreeRow:!0,needThreeValue:!1},{zbName:"控制差异率",subLabel:"目标:",firstValue:"0%",secondValue:"0",thirdValue:"",type:"1",needArrow:!1,showThreeRow:!0,needThreeValue:!1},{zbName:"周转天数(天)",subLabel:"环比:",firstValue:"0",secondValue:"0%",thirdValue:"",type:"1",needArrow:!1,showThreeRow:!0,needThreeValue:!1}],cardList:[],typeIndex:0}},computed:{dateStr:function(){return this.$store.state.dateStr},dateStrM:function(){return this.$store.getters.dateStrM},dateStrJ:function(){return this.$store.getters.dateStrJ},selectedDpName:function(){return this.$store.state.selectedDpName},userIdentityInit:function(){return this.$store.state.userIdentityInit},selectedZgsName:function(){var e=this.$store.state.authList,t="";if("2"===this.userIdentityInit){var a=!0,s=!1,r=void 0;try{for(var n,i=e[Symbol.iterator]();!(a=(n=i.next()).done);a=!0){var c=n.value;if(c.shop===this.selectedDpName){t=c.role;break}}}catch(f){s=!0,r=f}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}}else if("3"===this.userIdentityInit){var o=!0,u=!1,l=void 0;try{for(var d,b=e[Symbol.iterator]();!(o=(d=b.next()).done);o=!0){var h=d.value;if(h.role===this.selectedDpName){t=h.zgs;break}}}catch(f){u=!0,l=f}finally{try{o||null==b.return||b.return()}finally{if(u)throw l}}}return t},selectedMultiShops:function(){return this.$store.state.selectedMultiShops}},methods:{changeAllType:function(e){e.btn;var t=e.index;this.typeIndex=t,this.getCardListData(this.selectedZgsName,this.selectedDpName)},getCardListData:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,a){var s,r,n,i,c,o,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s="",s=0===this.typeIndex?b["a"].homeShop.getCardListDataDay:b["a"].homeShop.getCardListDataMon,r=this.$store.state.selectedMultiShops.map(function(e){return e.name}),n=r.join(","),e.next=6,b["a"].getDataFromInterface(s,{dateStrM:this.dateStrM,dateStrJ:this.dateStrJ,subName:t,cusName:n});case 6:i=e.sent,c=i.__statusCode,o=i.data,"1"===c?(u=JSON.parse(o),this.cardListDataInit=u,this.dealCardListData()):alert("获取总览指标数据失败~");case 10:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),dealCardListData:function(){var e=[];0===this.typeIndex?e=this.cardListDataInit.resM||[]:1===this.typeIndex?e=this.cardListDataInit.resJ||[]:2===this.typeIndex?e=this.cardListDataInit.resNl||[]:3===this.typeIndex&&(e=this.cardListDataInit.resY||[]);var t=l.a.cloneDeep(this.cardListData);if(e.length>0){var a=e[0];t[0].firstValue=Object(d["c"])(Object(d["f"])(a.output_amt),2),t[0].secondValue="",t[1].firstValue=Object(d["g"])(a.yield_rate,0),t[1].secondValue=Object(d["c"])(Object(d["f"])(a.target_amt),2),t[2].firstValue=Object(d["g"])(a.output_amt_yoy,0),t[2].secondValue="",t[3].firstValue=Object(d["c"])(Object(d["f"])(a.re_amt),2),t[3].secondValue=Object(d["g"])(a.re_amt_yoy,0),t[4].firstValue=Object(d["g"])(a.re_yield_rate,0),t[4].secondValue=Object(d["c"])(Object(d["f"])(a.re_target),2),t[5].firstValue=Object(d["g"])(a.re_amt_yoy,0),t[5].secondValue="",t[6].firstValue=Object(d["c"])(Object(d["f"])(a.margin_amt),2),t[6].secondValue=Object(d["g"])(a.margin_amt_yoy,1,"%"),t[7].firstValue=Object(d["g"])(a.margin_rate,1,"%"),t[7].secondValue=Object(d["g"])(a.margin_rate_yoy,1,"%"),t[7].thirdValue=Object(d["g"])(a.margin_deviation,1,"%"),0===this.typeIndex?(t[8].firstValue=Object(d["g"])(a.margin_deviation,1,"%"),t[8].secondValue="",t[8].thirdValue="",t[8].zbName="毛利率差异",t[8].showThreeRow=!1,t[8].needArrow=!0):(t[8].firstValue=Object(d["g"])(a.margin_ded_rate,0,"%"),t[8].secondValue=Object(d["g"])(Object(d["f"])(a.margin_ded_rate_yoy),1,"%"),t[8].thirdValue=Object(d["g"])(Object(d["f"])(a.margin_ded_deviation),1,"%"),t[8].zbName="扣后毛利率",t[8].showThreeRow=!0,t[8].needArrow=!0,t[8].needThreeValue=!0),t[9].firstValue=Object(d["c"])(Object(d["f"])(a.inv_amt),2),t[9].secondValue=Object(d["g"])(a.inv_yoy,1,"%"),t[10].firstValue=Object(d["g"])(a.diff_rate,1,"%"),t[10].secondValue=Object(d["c"])(Object(d["f"])(a.inv_target_amt),2),t[11].firstValue=Object(d["c"])(Object(d["f"])(a.zz_rate),2),t[11].secondValue=Object(d["g"])(a.zz_rate_ring,1,"%")}this.cardList=t},getAllData:function(){this.getCardListData(this.selectedZgsName,this.selectedDpName)}},created:function(){this.$store.commit("updateHeaderTitle","总览"),this.$store.commit("updateShowIcon",!0),this.$store.commit("updateDateStr",this.$store.state.dateStrInit),this.$store.dispatch("updateUserOption",{USER_ACCOUNT:window.userAccount,EXAMINATION_SUBJECT:"直营",LEVEL:"店铺",URL:"总览"}),""!==this.dateStr&&this.getCardListData(this.selectedZgsName,this.selectedDpName)},mounted:function(){this.$eventBus.$on("userSelected",this.getAllData)},beforeDestroy:function(){this.$eventBus.$off("userSelected",this.getAllData)},components:{pageTitle:i["a"],SwitchBtnList:c["a"],ZbCard:o["a"]}},f=h,p=(a("b5c5"),a("2877")),m=Object(p["a"])(f,s,r,!1,null,"71486337",null);t["default"]=m.exports},b5c5:function(e,t,a){"use strict";var s=a("2326"),r=a.n(s);r.a},b7b4:function(e,t,a){},ba36:function(e,t,a){}}]);
//# sourceMappingURL=chunk-71d7b770.7950b78a.js.map