(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a40e2ec"],{"0220":function(e,t,a){"use strict";var r=a("ef82"),n=a.n(r);n.a},"53aa":function(e,t,a){},"5bc8":function(e,t,a){"use strict";var r=a("53aa"),n=a.n(r);n.a},"6c5e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"stock-page-content"},[a("div",{staticClass:"header-content"},[a("page-title",{attrs:{title:e.pageName}})],1),a("div",{staticClass:"main-content"},[a("div",{staticClass:"block-content-table"},[a("min-title",{attrs:{nameVal:"库存分析-店铺",show:"3"}}),a("table-list",{key:"shopkcTable",attrs:{tableData:e.shopKcfxTableData,type:"stock-shops-kcfx",needClick:!1,defaultSelected:!0},on:{changeTableOrder:e.changeTableOrder}})],1),a("div",{staticClass:"block-content-chart"},[a("min-title",{attrs:{nameVal:e.shopQsfxTitle,show:"3"}}),a("div",{staticClass:"block-chart"},[a("BarLineChart",{attrs:{"chart-data":e.shopQsfxLineData,option:e.getQsfxLineOption(e.shopQsfxLineData)}})],1)],1),a("div",{staticClass:"block-content-bigChart"},[a("min-title",{attrs:{nameVal:e.shopJgfxTitle,show:"3"}}),a("type-list",{attrs:{tabsData:e.jgfxTypeList,switchType:"stock-shops-jgfx"},on:{activeTypeName:e.changeJgfxType}}),a("div",{staticClass:"switch-btn"},[a("div",{staticClass:"switch-btn-core"},[a("tabs",{key:"stock-shops-jgfx",attrs:{tabsData:e.blockSwitchList,switchType:"stock-shops-jgfx"},on:{tabsType:e.tabsType}})],1)]),a("div",{staticClass:"block-chart"},[a("bar-line-chart",{attrs:{"chart-data":e.shopJgfxBarLineData,option:e.getJgfxBarLineOption(e.shopJgfxBarLineData)}})],1)],1),a("div",{staticClass:"block-content-table"},[a("table-list",{attrs:{tableData:e.shopJgfxTableData,type:"stock-shops-jgfx"},on:{changeTableOrder:e.changeTableOrder}})],1)])])},n=[],s=(a("6b54"),a("db97"),a("96cf"),a("3b8d")),o=(a("7f7f"),a("55dd"),a("ac4d"),a("8a81"),a("ac6a"),a("a170")),i=a("202d"),c=a("385b"),l=a("e0d8"),d=a("79b7"),p=a("0e1c"),h=a("2ef0"),b=a.n(h),f=a("4c3e"),u=a("2d87"),x=a("a474"),m={name:"",data:function(){return{pageName:"库存(万)",shopKcfxTableDataInit:[],shopKcfxTableData:{tableHeader:[{name:"店铺",prop:"shop",needOrder:!1,order:"0",isPresent:!1,needArrow:!1},{name:"控制差异率",prop:"kzcy",needOrder:!0,order:"0",isPresent:!0,needArrow:!0,newLine:!0},{name:"差异率排名",prop:"kzcypm",needOrder:!0,order:"1",isPresent:!1,needArrow:!1,newLine:!0},{name:"周转天数",prop:"zzts",needOrder:!0,order:"0",isPresent:!1,needArrow:!1,newLine:!0},{name:"周转天数排名",prop:"zztspm",needOrder:!0,order:"0",isPresent:!1,needArrow:!1,newLine:!0}],tableContent:[]},shopQsfxTitle:"趋势分析",shopJgfxTitle:"结构分析",shopXsfxTitle:"有库存无销售分析",blockSwitchList:[{name:"数量",value:"数量"},{name:"金额",value:"金额"}],blockSwitchList_Xsfx:[{name:"7天",value:"7天"},{name:"30天",value:"30天"}],shopQsfxLineData:[],jgfxTypeList:[{name:"大类",value:"大类"},{name:"SPU",value:"SPU"}],dmTableHeader:[{name:"大类",prop:"type",needOrder:!1,order:"0",isPresent:!1,needArrow:!1},{name:"库存金额",prop:"ke",needOrder:!0,order:"2",isPresent:!1,needArrow:!1,newLine:!0},{name:"库存占比",prop:"kb",needOrder:!0,order:"0",isPresent:!0,needArrow:!1,newLine:!0},{name:"销售金额",prop:"xe",needOrder:!0,order:"0",isPresent:!1,needArrow:!1,newLine:!0},{name:"销售占比",prop:"xb",needOrder:!0,order:"0",isPresent:!0,needArrow:!1,newLine:!0},{name:"偏差",prop:"pc",needOrder:!0,order:"0",isPresent:!0,needArrow:!0}],spumTableHeader:[{name:"SPU",prop:"type",needOrder:!1,order:"0",isPresent:!1,needArrow:!1},{name:"库存金额",prop:"ke",needOrder:!0,order:"2",isPresent:!1,needArrow:!1,newLine:!0},{name:"库存占比",prop:"kb",needOrder:!0,order:"0",isPresent:!0,needArrow:!1,newLine:!0},{name:"销售金额",prop:"xe",needOrder:!0,order:"0",isPresent:!1,needArrow:!1,newLine:!0},{name:"销售占比",prop:"xb",needOrder:!0,order:"0",isPresent:!0,needArrow:!1,newLine:!0},{name:"偏差",prop:"pc",needOrder:!0,order:"0",isPresent:!0,needArrow:!0}],dqTableHeader:[{name:"大类",prop:"type",needOrder:!1,order:"0",isPresent:!1,needArrow:!1},{name:"库存数量",prop:"ke",needOrder:!0,order:"2",isPresent:!1,needArrow:!1,newLine:!0},{name:"库存占比",prop:"kb",needOrder:!0,order:"0",isPresent:!0,needArrow:!1,newLine:!0},{name:"销售数量",prop:"xe",needOrder:!0,order:"0",isPresent:!1,needArrow:!1,newLine:!0},{name:"销售占比",prop:"xb",needOrder:!0,order:"0",isPresent:!0,needArrow:!1,newLine:!0},{name:"偏差",prop:"pc",needOrder:!0,order:"0",isPresent:!0,needArrow:!0}],spuqTableHeader:[{name:"SPU",prop:"type",needOrder:!1,order:"0",isPresent:!1,needArrow:!1},{name:"库存数量",prop:"ke",needOrder:!0,order:"2",isPresent:!1,needArrow:!1,newLine:!0},{name:"库存占比",prop:"kb",needOrder:!0,order:"0",isPresent:!0,needArrow:!1,newLine:!0},{name:"销售数量",prop:"xe",needOrder:!0,order:"0",isPresent:!1,needArrow:!1,newLine:!0},{name:"销售占比",prop:"xb",needOrder:!0,order:"0",isPresent:!0,needArrow:!1,newLine:!0},{name:"偏差",prop:"pc",needOrder:!0,order:"0",isPresent:!0,needArrow:!0}],shopJgfxTableDataInit:[],shopJgfxBarLineData:[],shopJgfxTableData:{tableHeader:[],tableContent:[]},shopJgfxIndex:"00",shopJgfxTabIndex:0,shopJgfxBtnIndex:0}},computed:{dateStr:function(){return this.$store.state.dateStr},dateStrM:function(){return this.$store.getters.dateStrM},dateStrJ:function(){return this.$store.getters.dateStrJ},userIdentityInit:function(){return this.$store.state.userIdentityInit},selectedDpName:function(){return this.$store.state.selectedDpName},selectedZgsName:function(){var e=this.$store.state.authList,t="";if("2"===this.userIdentityInit){var a=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var i=s.value;if(i.shop===this.selectedDpName){t=i.role;break}}}catch(f){r=!0,n=f}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}}else if("3"===this.userIdentityInit){var c=!0,l=!1,d=void 0;try{for(var p,h=e[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var b=p.value;if(b.role===this.selectedDpName){t=b.zgs;break}}}catch(f){l=!0,d=f}finally{try{c||null==h.return||h.return()}finally{if(l)throw d}}}return t}},methods:{changeTableOrder:function(e){var t=e.header,a=e.type,r={tableHeader:[],tableContent:[]};"stock-shops-kcfx"===a?r=b.a.cloneDeep(this.shopKcfxTableData):"stock-shops-jgfx"===a&&(r=b.a.cloneDeep(this.shopJgfxTableData));var n=[],s=[],o=!0,i=!1,c=void 0;try{for(var l,d=r.tableHeader[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var p=l.value;"0"===t.order?p.needOrder&&t.prop===p.prop?p.order="1":p.needOrder&&t.prop!==p.prop&&(p.order="0"):"1"===t.order?p.needOrder&&t.prop===p.prop?p.order="2":p.needOrder&&t.prop!==p.prop&&(p.order="0"):"2"===t.order&&(p.needOrder&&t.prop===p.prop?p.order="1":p.needOrder&&t.prop!==p.prop&&(p.order="0")),n.push(p)}}catch(h){i=!0,c=h}finally{try{o||null==d.return||d.return()}finally{if(i)throw c}}"0"===t.order?s=r.tableContent.sort(Object(u["a"])(t.prop,!0)):"1"===t.order?s=r.tableContent.sort(Object(u["a"])(t.prop,!1)):"2"===t.order&&(s=r.tableContent.sort(Object(u["a"])(t.prop,!0))),"stock-shops-kcfx"===a?(this.shopKcfxTableData.tableHeader=n,this.shopKcfxTableData.tableContent=s):"stock-shops-jgfx"===a&&(this.shopJgfxTableData.tableHeader=n,this.shopJgfxTableData.tableContent=s)},changeTableRow:function(e){e.row;var t=e.name;e.type;this.shopQsfxTitle="趋势分析-"+t,this.shopJgfxTitle="结构分析-"+t,this.shopXsfxTitle="有库存无销售分析-"+t},changeJgfxType:function(e){e.activeTypeName;var t=e.index,a=e.type;"stock-shops-jgfx"===a&&(this.shopJgfxTabIndex=t,this.dealShopJgfxData())},tabsType:function(e){e.activeValue;var t=e.index,a=e.type;"stock-shops-jgfx"===a&&(this.shopJgfxBtnIndex=t,this.dealShopJgfxData())},getQsfxLineOption:function(e){var t={legend:{show:!0,textStyle:{fontFamily:"PingFangSC-Regular",color:"#71768C",fontSize:Object(f["a"])(24)}},xAxis:[{type:"category",name:"",interval:0,nameLocation:"start",nameTextStyle:{color:"#71768C",fontSize:Object(f["a"])(24),padding:[0,0,Object(f["a"])(-30),Object(f["a"])(-80)]},data:[],axisPointer:{type:"shadow"},axisLabel:{show:!0,interval:0,textStyle:{color:"#71768C"},fontSize:Object(f["a"])(24)},axisLine:{show:!1},axisTick:{show:!1}}],yAxis:[{type:"value",name:"(天)",nameTextStyle:{color:"#71768C",fontSize:Object(f["a"])(24)},axisLabel:{show:!0,fontSize:Object(f["a"])(24),textStyle:{color:"#71768C"}},axisLine:{show:!1,lineStyle:{color:"#ECEFF2"}},splitLine:{show:!1,lineStyle:{color:"#7d838b"}},axisTick:{show:!1}},{type:"value",name:"控制差异率",nameTextStyle:{color:"#71768C",fontSize:Object(f["a"])(24)},show:!0,axisLabel:{show:!0,fontSize:Object(f["a"])(24),textStyle:{color:"#71768C"},formatter:"{value}%"},axisLine:{show:!1,lineStyle:{color:"#ECEFF2"}},splitLine:{show:!0,lineStyle:{color:"#213A6B"}}}],series:[{type:"bar",name:"周转天数",barWidth:Object(f["a"])(40),itemStyle:{barBorderRadius:[Object(f["a"])(20),Object(f["a"])(20),0,0],color:function(e){return"#326DFF"}},data:[]},{type:"line",name:"控制差异率",smooth:!0,symbol:"none",yAxisIndex:1,itemStyle:{color:"#FFBE14"},lineStyle:{color:"#FFBE14",type:"solid",width:Object(f["a"])(4)},data:[]},{type:"line",name:"差异率",yAxisIndex:1,symbol:"none",itemStyle:{color:"#FF0200"},lineStyle:{color:"#FF0200",type:"dashed",width:Object(f["a"])(4)},data:[]}]},a=[],r=[],n=[],s=[],o=!0,i=!1,c=void 0;try{for(var l,d=e[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var p=l.value;a.push(p.label),r.push(p.zzts),n.push(p.kzcy),s.push(p.cy)}}catch(h){i=!0,c=h}finally{try{o||null==d.return||d.return()}finally{if(i)throw c}}return t.xAxis[0].data=a,t.series[0].data=r,t.series[1].data=n,t.series[2].data=s,t},getJgfxBarLineOption:function(e){var t={legend:{show:!0,top:Object(f["a"])(20),textStyle:{fontFamily:"PingFangSC-Regular",color:"#71768C",fontSize:Object(f["a"])(24)},data:["库存占比","销售占比"]},grid:{top:Object(f["a"])(60),left:!0===this.showZy&&0===this.zyJgfxTabIndex||!1===this.showZy&&1===this.zgsJgfxTabIndex?Object(f["a"])(100):Object(f["a"])(200)},xAxis:[{type:"value",name:"",interval:0,show:!1,nameLocation:"start",nameTextStyle:{color:"#71768C",fontSize:Object(f["a"])(24),padding:[0,0,Object(f["a"])(-30),Object(f["a"])(-80)]},data:[],axisPointer:{type:"shadow"},axisLabel:{show:!0,interval:0,textStyle:{color:"#71768C"},fontSize:Object(f["a"])(24)},axisLine:{show:!1},axisTick:{show:!1}}],yAxis:[{type:"category",axisLine:{show:!1,lineStyle:{color:"#ECEFF2"}},axisLabel:{show:!0,textStyle:{color:"#5F6D96",fontSize:Object(f["a"])(28)},formatter:function(e){var t="";return t=e.length>8?e.substring(0,8)+"\n"+e.substring(8):e,t}},splitLine:{show:!1,lineStyle:{color:"#7d838b"}},axisTick:{show:!1}}],series:[{type:"bar",name:"库存占比",barWidth:Object(f["a"])(32),barGap:0,label:{normal:{position:"right",formatter:"{c}%",show:!0,fontSize:Object(f["a"])(24),color:"#326DFF"}},itemStyle:{barBorderRadius:[0,Object(f["a"])(20),Object(f["a"])(20),0],color:function(e){return"#326DFF"}},data:[]},{type:"bar",name:"销售占比",barWidth:Object(f["a"])(32),barGap:0,label:{normal:{position:"right",formatter:"{c}%",show:!0,fontSize:Object(f["a"])(24),color:"#D1A226"}},itemStyle:{barBorderRadius:[0,Object(f["a"])(20),Object(f["a"])(20),0],color:function(e){return"#D1A226"}},data:[]}]},a=[],r=[],n=[],s=0,o=!0,i=!1,c=void 0;try{for(var l,d=e[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var p=l.value;if(s++,a.unshift(p.type),r.unshift(p.kb),n.unshift(p.xb),10===s)break}}catch(h){i=!0,c=h}finally{try{o||null==d.return||d.return()}finally{if(i)throw c}}return t.yAxis[0].data=a,t.series[0].data=r,t.series[1].data=n,t},getAllData:function(){this.getShopKcfxTableData(),this.shopQsfxTitle="趋势分析-"+this.selectedDpName,this.shopJgfxTitle="结构分析-"+this.selectedDpName,this.getShopQsfxLineData(this.selectedDpName),this.getShopJgfxBarLineData(this.selectedDpName)},getShopKcfxTableData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a,r,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={examSub:"直营",subName:this.selectedZgsName,dateStrM:this.dateStrM},e.next=3,x["a"].getDataFromInterface(x["a"].stockShop.getShopKcfxTableData,t);case 3:a=e.sent,r=a.__statusCode,n=a.data,Object.is(r,"1")&&(s=JSON.parse(n),this.shopKcfxTableDataInit=s,this.dealshopKcfxTableData());case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),dealshopKcfxTableData:function(){var e=[],t=this.shopKcfxTableDataInit.res,a=!0,r=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var i=s.value,c={};c.shop=i.customer_name,c.kzcy=Object(u["g"])(i.diff_rate),c.zzts=Object(u["c"])(Object(u["f"])(i.zz_rate),2),c.kzcypm=Object(u["c"])(Object(u["f"])(i.order_diff_rate),0),c.zztspm=Object(u["c"])(Object(u["f"])(i.order_zz_rate),0),e.push(c)}}catch(l){r=!0,n=l}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}e.length>0?this.shopKcfxTableData.tableContent=e.sort(Object(u["a"])("kzcypm",!0)):this.shopKcfxTableData.tableContent=[]},getShopQsfxLineData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var a,r,n,s,o,i,c,l,d,p,h,b,f;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a={examSub:"直营",cusName:t,dateStrM:this.dateStrM},e.next=3,x["a"].getDataFromInterface(x["a"].stockShop.getShopQsfxBarLineData,a);case 3:if(r=e.sent,n=r.__statusCode,s=r.data,!Object.is(n,"1")){e.next=29;break}for(o=JSON.parse(s),i=[],c=!0,l=!1,d=void 0,e.prev=12,p=o.res[Symbol.iterator]();!(c=(h=p.next()).done);c=!0)b=h.value,f={},f.label=b.period_wid,f.kzcy=(100*Object(u["f"])(b.diff_rate)).toFixed(0),f.zzts=Object(u["c"])(Object(u["f"])(b.zz_rate),2),f.cy=(100*Object(u["f"])(b.target_diff_rate)).toFixed(0),i.push(f);e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](12),l=!0,d=e.t0;case 20:e.prev=20,e.prev=21,c||null==p.return||p.return();case 23:if(e.prev=23,!l){e.next=26;break}throw d;case 26:return e.finish(23);case 27:return e.finish(20);case 28:i.length>0?this.shopQsfxLineData=i:this.shopQsfxLineData=[];case 29:case"end":return e.stop()}},e,this,[[12,16,20,28],[21,,23,27]])}));function t(t){return e.apply(this,arguments)}return t}(),getShopJgfxBarLineData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var a,r,n,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a={examSub:"直营",cusName:t,dateStrM:this.dateStrM},e.next=3,x["a"].getDataFromInterface(x["a"].stockShop.getShopJgfxBarLineData,a);case 3:r=e.sent,n=r.__statusCode,s=r.data,Object.is(n,"1")&&(o=JSON.parse(s),this.shopJgfxTableDataInit=o,this.dealShopJgfxData());case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),dealShopJgfxData:function(){this.shopJgfxIndex=this.shopJgfxTabIndex.toString()+this.shopJgfxBtnIndex.toString();var e=[],t=[],a=[];"00"===this.shopJgfxIndex?(a=this.shopJgfxTableDataInit.resDQ||[],this.shopJgfxTableData.tableHeader=this.dqTableHeader):"01"===this.shopJgfxIndex?(a=this.shopJgfxTableDataInit.resDM||[],this.shopJgfxTableData.tableHeader=this.dmTableHeader):"10"===this.shopJgfxIndex?(a=this.shopJgfxTableDataInit.resSPUQ||[],this.shopJgfxTableData.tableHeader=this.spuqTableHeader):"11"===this.shopJgfxIndex&&(a=this.shopJgfxTableDataInit.resSPUM||[],this.shopJgfxTableData.tableHeader=this.spumTableHeader);var r=!0,n=!1,s=void 0;try{for(var o,i=a[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var c=o.value,l={};l.type=c.type_name,l.xe=Object(u["c"])(Object(u["f"])(c.sale),2),l.ke=Object(u["c"])(Object(u["f"])(c.inv),2),l.xb=Object(u["g"])(c.sale_rotio_rate),l.kb=Object(u["g"])(c.inv_rotio_rate),l.pc=Object(u["g"])(c.deviation),t.push(l),e.push(l)}}catch(d){n=!0,s=d}finally{try{r||null==i.return||i.return()}finally{if(n)throw s}}this.shopJgfxBarLineData=e.sort(Object(u["a"])("kb",!1)),this.shopJgfxTableData.tableContent=t.sort(Object(u["a"])("ke",!1))}},created:function(){this.$store.commit("updateHeaderTitle","库存"),this.$store.commit("updateShowIcon",!0),this.$store.commit("updateDateStr",this.$store.state.dateStrInit),this.$store.dispatch("updateUserOption",{USER_ACCOUNT:window.userAccount,EXAMINATION_SUBJECT:"直营",LEVEL:"店铺",URL:"库存"}),""!==this.dateStr&&this.getAllData()},beforeDestroy:function(){this.$eventBus.$off("userSelected",this.getAllData)},mounted:function(){this.$eventBus.$on("userSelected",this.getAllData)},components:{pageTitle:o["a"],MinTitle:i["a"],BarLineChart:c["a"],TableList:l["a"],TypeList:d["a"],Tabs:p["a"]}},y=m,g=(a("0220"),a("2877")),w=Object(g["a"])(y,r,n,!1,null,"7728eb35",null);t["default"]=w.exports},"79b7":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tabs"},[a("ul",{staticClass:"tabs-item"},e._l(e.tabsData,function(t,r){return a("li",{key:r,class:r===e.activeIndex?"active":"",style:e.withObj,on:{click:function(a){return e.changeType(r,t)}}},[e._v(e._s(t.name))])}),0)])},n=[],s={name:"Title",props:{tabsData:{type:Array,default:function(){return[{name:"考核主体分析",value:"考核主体"},{name:"大类分析",value:"大类"}]}},switchType:{type:String,default:""},defaultIndex:{type:String,default:"0"}},data:function(){return{activeIndex:0,activeTypeName:""}},computed:{withObj:function(){return{width:100/this.tabsData.length+"%"}}},methods:{changeType:function(e,t){this.activeIndex=e,this.activeTypeName=t.value,this.$emit("activeTypeName",{activeTypeName:this.activeTypeName,index:this.activeIndex,type:this.switchType})}},created:function(){var e=this;this.$eventBus.$on("resetTypeList",function(){e.tabsData.length>0&&(e.activeIndex=0,e.activeTypeName=e.tabsData[0].value)})}},o=s,i=(a("5bc8"),a("2877")),c=Object(i["a"])(o,r,n,!1,null,"1bc23b3a",null);t["a"]=c.exports},ef82:function(e,t,a){}}]);
//# sourceMappingURL=chunk-5a40e2ec.efc1f08e.js.map